---
import BioSection from '@/components/sections/BioSection';
import ContactSection from '@/components/sections/ContactSection';
import FeaturedProjectsSection from '@/components/sections/FeaturedProjectsSection';
import HeroSection from '@/components/sections/HeroSection';
import MoreThingsSection from '@/components/sections/MoreThingsSection';
import SeparatorSection from '@/components/sections/SeparatorSection';
import Layout from '@/layouts/Layout.astro';
import { fetchFeaturedProjects, fetchNewsBanner } from '@/utils/sanity';
import { fetchSoundcloudTracks } from '@/utils/soundcloud';

const featuredProjects = await fetchFeaturedProjects();
const newsBanner = await fetchNewsBanner();
const soundcloudTracks = await fetchSoundcloudTracks(2);
---

<Layout>
  <HeroSection slot="header" client:idle newsBanner={newsBanner} />
  <BioSection />
  <SeparatorSection />
  <FeaturedProjectsSection projects={featuredProjects} />
  <SeparatorSection />
  <MoreThingsSection soundcloudTracks={soundcloudTracks} />
  <SeparatorSection />
  <ContactSection client:visible />
</Layout>
